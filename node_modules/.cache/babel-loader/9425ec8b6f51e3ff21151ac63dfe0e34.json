{"ast":null,"code":"var _jsxFileName = \"/home/agus/Desktop/PROJECTS/LAIKA/frontend/src/Components/MenuUsuario/Subcomponents/SecurityInfo.js\";\nimport React, { useState } from \"react\";\nimport \"../Styles/SecurityInfo.css\";\nimport { validationSecInfo } from \"../Functions/validationSecInfo\";\nimport AlertTitle from \"@material-ui/lab/AlertTitle\";\nimport Collapse from \"@material-ui/core/Collapse\";\nimport Alert from \"@material-ui/lab/Alert\";\nimport api from \"../../SharedComponents/APIConfig\";\n\nfunction SecurityInfo(props) {\n  const [state, setState] = useState({\n    contrasena: \"\",\n    confirmacion: \"\"\n  });\n  const [openError, setOpenError] = React.useState(false);\n  const [openSuccess, setOpenSuccess] = React.useState(false);\n  const [message, setMsg] = React.useState(\"\");\n\n  function handleChange(event) {\n    setState({ ...state,\n      [event.target.name]: event.target.value\n    });\n  }\n\n  async function updatePassword(ID_Usuario, contrasena) {\n    var response = await fetch(api.url + \"/changePassword\", {\n      method: \"put\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify({\n        ID_Usuario,\n        contrasena\n      })\n    });\n    return response.status;\n  }\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"securityContainer\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 34,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"alertSec\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 35,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Collapse, {\n    in: openError,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 36,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Alert, {\n    onClose: () => {\n      setOpenError(false);\n    },\n    variant: \"outlined\",\n    severity: \"error\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 37,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(AlertTitle, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 25\n    }\n  }, \"Error - Faltan llenar los siguientes campos\"), message)), /*#__PURE__*/React.createElement(Collapse, {\n    in: openSuccess,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Alert, {\n    onClose: () => {\n      setOpenSuccess(false);\n    },\n    variant: \"outlined\",\n    severity: \"success\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(AlertTitle, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 25\n    }\n  }, \"Contrase\\xF1a cambiada exitosamente\")))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"securityTitle\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"secTitle1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    className: \"fa fa-key\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 21\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"secTitle2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 21\n    }\n  }, \"Cambiar contrase\\xF1a\"))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"securityPWD\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"contrasena\",\n    className: \"inp\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    autoComplete: \"off\",\n    id: \"contrasena\",\n    type: \"password\",\n    name: \"contrasena\",\n    value: state.contrasena,\n    onChange: handleChange,\n    placeholder: \"\\xA0\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"label\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 21\n    }\n  }, \"Nueva contrase\\xF1a\"), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"focus-bg\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 21\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"securityCPWD\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"confirmacion\",\n    className: \"inp\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    autoComplete: \"off\",\n    id: \"confirmacion\",\n    type: \"password\",\n    name: \"confirmacion\",\n    value: state.confirmacion,\n    onChange: handleChange,\n    placeholder: \"\\xA0\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"label\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 21\n    }\n  }, \"Confirmar contrase\\xF1a\"), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"focus-bg\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 21\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"btnSecurityBlock\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    autoComplete: \"off\",\n    className: \"btnSecurity\",\n    type: \"button\",\n    value: \"Guardar\",\n    onClick: async () => {\n      const valid = validationSecInfo(state);\n\n      if (valid.isValid) {\n        const status = await updatePassword(props.ID_Usuario, state.contrasena);\n\n        if (status === 200) {\n          setOpenError(false);\n          setOpenSuccess(true);\n        } else {\n          valid.msg = \"No se ha podido actualizar la contraseña. Error en el servidor.\";\n          setMsg(valid.msg);\n          setOpenSuccess(false);\n          setOpenError(true);\n        }\n      } else {\n        setMsg(valid.msg);\n        setOpenSuccess(false);\n        setOpenError(true);\n      }\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 17\n    }\n  })));\n}\n\nexport default SecurityInfo;","map":{"version":3,"sources":["/home/agus/Desktop/PROJECTS/LAIKA/frontend/src/Components/MenuUsuario/Subcomponents/SecurityInfo.js"],"names":["React","useState","validationSecInfo","AlertTitle","Collapse","Alert","api","SecurityInfo","props","state","setState","contrasena","confirmacion","openError","setOpenError","openSuccess","setOpenSuccess","message","setMsg","handleChange","event","target","name","value","updatePassword","ID_Usuario","response","fetch","url","method","headers","body","JSON","stringify","status","valid","isValid","msg"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\nimport \"../Styles/SecurityInfo.css\";\nimport { validationSecInfo } from \"../Functions/validationSecInfo\";\nimport AlertTitle from \"@material-ui/lab/AlertTitle\";\nimport Collapse from \"@material-ui/core/Collapse\";\nimport Alert from \"@material-ui/lab/Alert\";\nimport api from \"../../SharedComponents/APIConfig\";\n\nfunction SecurityInfo(props) {\n    const [state, setState] = useState({\n        contrasena: \"\",\n        confirmacion: \"\",\n    });\n\n    const [openError, setOpenError] = React.useState(false);\n    const [openSuccess, setOpenSuccess] = React.useState(false);\n    const [message, setMsg] = React.useState(\"\");\n\n    function handleChange(event) {\n        setState({ ...state, [event.target.name]: event.target.value });\n    }\n\n    async function updatePassword(ID_Usuario, contrasena) {\n        var response = await fetch(api.url + \"/changePassword\", {\n            method: \"put\",\n            headers: { \"Content-Type\": \"application/json\" },\n            body: JSON.stringify({ ID_Usuario, contrasena }),\n        });\n\n        return response.status;\n    }\n\n    return (\n        <div className=\"securityContainer\">\n            <div className=\"alertSec\">\n                <Collapse in={openError}>\n                    <Alert\n                        onClose={() => {\n                            setOpenError(false);\n                        }}\n                        variant=\"outlined\"\n                        severity=\"error\"\n                    >\n                        <AlertTitle>\n                            Error - Faltan llenar los siguientes campos\n                        </AlertTitle>\n                        {message}\n                    </Alert>\n                </Collapse>\n\n                <Collapse in={openSuccess}>\n                    <Alert\n                        onClose={() => {\n                            setOpenSuccess(false);\n                        }}\n                        variant=\"outlined\"\n                        severity=\"success\"\n                    >\n                        <AlertTitle>\n                            Contraseña cambiada exitosamente\n                        </AlertTitle>\n                    </Alert>\n                </Collapse>\n            </div>\n\n            <div className=\"securityTitle\">\n                <div className=\"secTitle1\">\n                    <i className=\"fa fa-key\"></i>\n                </div>\n                <div className=\"secTitle2\">\n                    <label>Cambiar contraseña</label>\n                </div>\n            </div>\n            <div className=\"securityPWD\">\n                <label htmlFor=\"contrasena\" className=\"inp\">\n                    <input\n                        autoComplete=\"off\"\n                        id=\"contrasena\"\n                        type=\"password\"\n                        name=\"contrasena\"\n                        value={state.contrasena}\n                        onChange={handleChange}\n                        placeholder=\"&nbsp;\"\n                    />\n                    <span className=\"label\">Nueva contraseña</span>\n                    <span className=\"focus-bg\"></span>\n                </label>\n            </div>\n            <div className=\"securityCPWD\">\n                <label htmlFor=\"confirmacion\" className=\"inp\">\n                    <input\n                        autoComplete=\"off\"\n                        id=\"confirmacion\"\n                        type=\"password\"\n                        name=\"confirmacion\"\n                        value={state.confirmacion}\n                        onChange={handleChange}\n                        placeholder=\"&nbsp;\"\n                    />\n                    <span className=\"label\">Confirmar contraseña</span>\n                    <span className=\"focus-bg\"></span>\n                </label>\n            </div>\n            <div className=\"btnSecurityBlock\">\n                <input\n                    autoComplete=\"off\"\n                    className=\"btnSecurity\"\n                    type=\"button\"\n                    value=\"Guardar\"\n                    onClick={async () => {\n                        const valid = validationSecInfo(state);\n                        if (valid.isValid) {\n                            const status = await updatePassword(\n                                props.ID_Usuario,\n                                state.contrasena\n                            );\n                            if (status === 200) {\n                                setOpenError(false);\n                                setOpenSuccess(true);\n                            } else {\n                                valid.msg =\n                                    \"No se ha podido actualizar la contraseña. Error en el servidor.\";\n                                setMsg(valid.msg);\n                                setOpenSuccess(false);\n                                setOpenError(true);\n                            }\n                        } else {\n                            setMsg(valid.msg);\n                            setOpenSuccess(false);\n                            setOpenError(true);\n                        }\n                    }}\n                />\n            </div>\n        </div>\n    );\n}\n\nexport default SecurityInfo;\n"]},"metadata":{},"sourceType":"module"}