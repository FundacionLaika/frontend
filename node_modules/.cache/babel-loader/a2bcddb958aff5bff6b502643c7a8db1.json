{"ast":null,"code":"var _jsxFileName = \"/home/agus/Desktop/PROJECTS/LAIKA/frontend/src/Components/Calendario/Calendario.js\";\nimport React, { useState, useEffect } from \"react\";\nimport { Calendar, momentLocalizer } from \"react-big-calendar\";\nimport \"react-big-calendar/lib/css/react-big-calendar.css\";\nimport moment from \"moment\";\nimport \"./Styles/Calendario.css\";\nimport api from \"../SharedComponents/APIConfig\";\n\nrequire(\"moment/locale/es.js\");\n\nconst localizer = momentLocalizer(moment);\n\nasync function fetchEvents() {\n  var response = await fetch(api.url + \"/events\", {\n    method: \"get\",\n    headers: {\n      \"Content-Type\": \"application/json\"\n    }\n  });\n  if (response.status !== 200) return [];\n  var events = await response.json();\n  return events;\n}\n\nfunction generateEvent(message, animalId, animalName, date) {\n  const eventDate = new Date(date);\n  eventDate.setHours(12, 0, 0, 0);\n  const generatedEvent = {\n    title: message + animalName + \" (ID: \" + animalId + \")\",\n    start: eventDate,\n    end: eventDate\n  };\n  return generatedEvent;\n}\n\nfunction decodeEvents(encodedEvents) {\n  if (!encodedEvents) return;\n  const decoder = {\n    FechaRescate: \"Se rescato a \",\n    FechaEsterilizacion: \"Se esterilizo a \",\n    FechaInicioHT: \"Inicio de Hogar Temporal de \",\n    FechaFinalHT: \"Fin de Hogar Temporal de \",\n    VisitaAdopcion: \"Se realizo visita de adopcion a \",\n    FechaAdopcion: \"Se adopto a \",\n    FechaVacuna1: {\n      Canino: \"Puppy\",\n      Felino: \"Triple Viral Felina\",\n      Otro: \"Vacuna 1\"\n    },\n    FechaVacuna2: {\n      Canino: \"Refuerzo Puppy\",\n      Felino: \"Refuerzo Triple Viral Felina\",\n      Otro: \"Vacuna 2\"\n    },\n    FechaVacuna3: {\n      Canino: \"Multiple\",\n      Felino: \"Leucemia\",\n      Otro: \"Vacuna 3\"\n    },\n    FechaVacuna4: {\n      Canino: \"Refuerzo Multiple\",\n      Felino: \"Desparasitacion\",\n      Otro: \"Vacuna 4\"\n    },\n    FechaVacuna5: {\n      Canino: \"Rabia\",\n      Felino: \"Rabia\",\n      Otro: \"Vacuna 5\"\n    }\n  };\n  var eventsList = [];\n  encodedEvents.forEach(animal => {\n    const animalId = animal[\"ID_Animal\"];\n    const animalName = animal[\"Nombre\"];\n    const animalSpecie = animal[\"Especie\"];\n    console.log(\"animal: \" + animal);\n\n    for (const event in animal) {\n      const eventDate = animal[event];\n      if (!eventDate) continue;\n      if (event === \"ID_Animal\" || event === \"Nombre\" || event === \"Especie\") continue;\n\n      if (event.includes(\"FechaVacuna\")) {\n        if (!decoder[event]) continue;\n        const vacuna = decoder[event][animalSpecie];\n        const numFecha = event.charAt(event.length - 1);\n        const estaVacuando = animal[\"vacuna\" + numFecha];\n        console.log(\"esta vacuando \" + estaVacuando);\n        mensaje = estaVacuando === 1 ? \"Se aplico vacuna\" + vacuna + \" a \" : \"Cita agendada de vacuna \" + vacuna + \" de \";\n        const generatedEvent = generateEvent(mensaje, animalId, animalName, eventDate);\n        eventsList.push(generatedEvent);\n      } else if (event === \"CitasMedicas\") {\n        const citasMedicas = eventDate.split(\",\");\n        citasMedicas.forEach(citaMedica => {\n          const generatedEvent = generateEvent(\"Cita medica de \", animalId, animalName, citaMedica);\n          eventsList.push(generatedEvent);\n          console.log(generatedEvent);\n        });\n      } else {\n        if (!decoder[event]) continue;\n        const generatedEvent = generateEvent(decoder[event], animalId, animalName, eventDate);\n        eventsList.push(generatedEvent);\n      }\n    }\n  });\n  return eventsList;\n}\n\nfunction Calendario(props) {\n  const [events, setEvents] = useState([]);\n  useEffect(() => {\n    async function fetchData() {\n      const eventsData = await fetchEvents();\n      const eventList = decodeEvents(eventsData);\n      setEvents(eventList);\n    }\n\n    fetchData();\n  }, [props]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"calendarComponent\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"calendario bigCalendar-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Calendar, {\n    popup: true,\n    localizer: localizer,\n    events: events,\n    defaultDate: new Date(),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 17\n    }\n  })));\n}\n\nexport default Calendario;","map":{"version":3,"sources":["/home/agus/Desktop/PROJECTS/LAIKA/frontend/src/Components/Calendario/Calendario.js"],"names":["React","useState","useEffect","Calendar","momentLocalizer","moment","api","require","localizer","fetchEvents","response","fetch","url","method","headers","status","events","json","generateEvent","message","animalId","animalName","date","eventDate","Date","setHours","generatedEvent","title","start","end","decodeEvents","encodedEvents","decoder","FechaRescate","FechaEsterilizacion","FechaInicioHT","FechaFinalHT","VisitaAdopcion","FechaAdopcion","FechaVacuna1","Canino","Felino","Otro","FechaVacuna2","FechaVacuna3","FechaVacuna4","FechaVacuna5","eventsList","forEach","animal","animalSpecie","console","log","event","includes","vacuna","numFecha","charAt","length","estaVacuando","mensaje","push","citasMedicas","split","citaMedica","Calendario","props","setEvents","fetchData","eventsData","eventList"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { Calendar, momentLocalizer } from \"react-big-calendar\";\n\nimport \"react-big-calendar/lib/css/react-big-calendar.css\";\nimport moment from \"moment\";\n\nimport \"./Styles/Calendario.css\";\nimport api from \"../SharedComponents/APIConfig\";\n\nrequire(\"moment/locale/es.js\");\n\nconst localizer = momentLocalizer(moment);\n\nasync function fetchEvents() {\n    var response = await fetch(api.url + \"/events\", {\n        method: \"get\",\n        headers: { \"Content-Type\": \"application/json\" },\n    });\n\n    if (response.status !== 200) return [];\n    var events = await response.json();\n\n    return events;\n}\n\nfunction generateEvent(message, animalId, animalName, date) {\n    const eventDate = new Date(date);\n    eventDate.setHours(12, 0, 0, 0);\n    const generatedEvent = {\n        title: message + animalName + \" (ID: \" + animalId + \")\",\n        start: eventDate,\n        end: eventDate,\n    };\n    return generatedEvent;\n}\n\nfunction decodeEvents(encodedEvents) {\n    if (!encodedEvents) return;\n\n    const decoder = {\n        FechaRescate: \"Se rescato a \",\n        FechaEsterilizacion: \"Se esterilizo a \",\n        FechaInicioHT: \"Inicio de Hogar Temporal de \",\n        FechaFinalHT: \"Fin de Hogar Temporal de \",\n        VisitaAdopcion: \"Se realizo visita de adopcion a \",\n        FechaAdopcion: \"Se adopto a \",\n        FechaVacuna1: {\n            Canino: \"Puppy\",\n            Felino: \"Triple Viral Felina\",\n            Otro: \"Vacuna 1\",\n        },\n        FechaVacuna2: {\n            Canino: \"Refuerzo Puppy\",\n            Felino: \"Refuerzo Triple Viral Felina\",\n            Otro: \"Vacuna 2\",\n        },\n        FechaVacuna3: {\n            Canino: \"Multiple\",\n            Felino: \"Leucemia\",\n            Otro: \"Vacuna 3\",\n        },\n        FechaVacuna4: {\n            Canino: \"Refuerzo Multiple\",\n            Felino: \"Desparasitacion\",\n            Otro: \"Vacuna 4\",\n        },\n        FechaVacuna5: {\n            Canino: \"Rabia\",\n            Felino: \"Rabia\",\n            Otro: \"Vacuna 5\",\n        },\n    };\n\n    var eventsList = [];\n\n    encodedEvents.forEach((animal) => {\n        const animalId = animal[\"ID_Animal\"];\n        const animalName = animal[\"Nombre\"];\n        const animalSpecie = animal[\"Especie\"];\n\n        console.log(\"animal: \" + animal);\n\n        for (const event in animal) {\n            const eventDate = animal[event];\n            if (!eventDate) continue;\n\n            if (\n                event === \"ID_Animal\" ||\n                event === \"Nombre\" ||\n                event === \"Especie\"\n            )\n                continue;\n\n            if (event.includes(\"FechaVacuna\")) {\n                if (!decoder[event]) continue;\n\n                const vacuna = decoder[event][animalSpecie];\n\n                const numFecha = event.charAt(event.length - 1);\n                const estaVacuando = animal[\"vacuna\" + numFecha];\n\n                console.log(\"esta vacuando \" + estaVacuando);\n                mensaje =\n                    estaVacuando === 1\n                        ? \"Se aplico vacuna\" + vacuna + \" a \"\n                        : \"Cita agendada de vacuna \" + vacuna + \" de \";\n\n                const generatedEvent = generateEvent(\n                    mensaje,\n                    animalId,\n                    animalName,\n                    eventDate\n                );\n                eventsList.push(generatedEvent);\n            } else if (event === \"CitasMedicas\") {\n                const citasMedicas = eventDate.split(\",\");\n                citasMedicas.forEach((citaMedica) => {\n                    const generatedEvent = generateEvent(\n                        \"Cita medica de \",\n                        animalId,\n                        animalName,\n                        citaMedica\n                    );\n                    eventsList.push(generatedEvent);\n                    console.log(generatedEvent);\n                });\n            } else {\n                if (!decoder[event]) continue;\n                const generatedEvent = generateEvent(\n                    decoder[event],\n                    animalId,\n                    animalName,\n                    eventDate\n                );\n                eventsList.push(generatedEvent);\n            }\n        }\n    });\n\n    return eventsList;\n}\n\nfunction Calendario(props) {\n    const [events, setEvents] = useState([]);\n\n    useEffect(() => {\n        async function fetchData() {\n            const eventsData = await fetchEvents();\n\n            const eventList = decodeEvents(eventsData);\n\n            setEvents(eventList);\n        }\n        fetchData();\n    }, [props]);\n\n    return (\n        <div className=\"calendarComponent\">\n            <div className=\"calendario bigCalendar-container\">\n                <Calendar\n                    popup\n                    localizer={localizer}\n                    events={events}\n                    defaultDate={new Date()}\n                />\n            </div>\n        </div>\n    );\n}\n\nexport default Calendario;\n"]},"metadata":{},"sourceType":"module"}