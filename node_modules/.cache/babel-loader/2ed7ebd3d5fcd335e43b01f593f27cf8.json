{"ast":null,"code":"var _jsxFileName = \"/home/agus/Desktop/PROJECTS/LAIKA/frontend/src/Components/RegistroGeneral/RegistroGeneral.js\";\nimport React from \"react\";\nimport Rescatistas from \"./Subcomponents/Rescatistas\";\nimport DatosGeneralesRG from \"./Subcomponents/DatosGeneralesRG\";\nimport ModalEliminar from \"./Subcomponents/ModalEliminar\";\nimport Direccion from \"../SharedComponents/Direccion\";\nimport Foto from \"../SharedComponents/Foto\";\nimport NavBarRegistros from \"../SharedComponents/NavBarRegistros\";\nimport { Link, withRouter } from \"react-router-dom\";\nimport \"./Styles/RegistroGeneral.css\";\nimport queryString from \"query-string\";\nimport { validationRG } from \"./Functions/ValidationRG\";\nimport AlertTitle from \"@material-ui/lab/AlertTitle\";\nimport Collapse from \"@material-ui/core/Collapse\";\nimport Alert from \"@material-ui/lab/Alert\";\nimport ErrorPage from \"../SharedComponents/ErrorPage\";\n\nclass RegistroGeneral extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      id: \"\",\n      nombre: \"\",\n      edad: \"\",\n      genero: \"\",\n      especie: \"\",\n      fechaDeRescate: null,\n      estatus: \"\",\n      calle: \"\",\n      numero: \"\",\n      colonia: \"\",\n      municipio: \"\",\n      senasParticulares: \"\",\n      foto: null,\n      rescatistas: [],\n      openError: false,\n      openSuccess: false,\n      msg: \"\",\n      showErrorPage: false\n    };\n    this.restablecido = false;\n    this.estaRegistrado = false;\n\n    this.handleChange = event => {\n      this.setState({\n        [event.target.name]: event.target.value\n      });\n    };\n\n    this.handleDate = (fecha, name) => {\n      this.setState({\n        [name]: fecha\n      });\n    };\n\n    this.handleSubmit = event => {\n      event.preventDefault();\n      this.estaRegistrado ? this.updateDB() : this.insertDB();\n    };\n\n    this.insertDB = () => {\n      fetch(api.url + \"/registroGeneral\", {\n        method: \"post\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify(this.state)\n      }).then(response => response.json()).then(ID_Animal => {\n        console.log(ID_Animal);\n        this.props.location.search = \"/Laika/RegistroGeneral?id='+ID_Animal\";\n        this.props.history.push('/Laika/RegistroGeneral?id=' + ID_Animal);\n      }).catch(err => console.log(err));\n    };\n\n    this.updateDB = () => {\n      fetch(api.url + \"/registroGeneral\", {\n        method: \"put\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify(this.state)\n      }).then(response => response.json()).catch(err => console.log(err));\n    };\n\n    this.agregarRescatista = rescatista => {\n      if (rescatista.text !== \"\") {\n        this.setState(state => ({\n          rescatistas: [rescatista, ...state.rescatistas]\n        }));\n      }\n    };\n\n    this.eliminarRescatista = id => {\n      this.setState(state => ({\n        rescatistas: state.rescatistas.filter(rescatista => rescatista.id !== id)\n      }));\n    };\n\n    this.imageHandler = event => {\n      try {\n        const reader = new FileReader();\n        const foto = event.target.id;\n\n        reader.onload = () => {\n          if (reader.readyState === 2) {\n            this.setState({\n              [foto]: reader.result\n            });\n          }\n        };\n\n        reader.readAsDataURL(event.target.files[0]);\n      } catch (error) {}\n    };\n\n    this.handleRestablecer = () => {\n      if (this.estaRegistrado) this.fetchData();else {\n        this.setState({\n          id: \"\",\n          nombre: \"\",\n          edad: \"\",\n          genero: \"\",\n          especie: \"\",\n          fechaDeRescate: null,\n          estatus: \"\",\n          calle: \"\",\n          numero: \"\",\n          colonia: \"\",\n          municipio: \"\",\n          senasParticulares: \"\",\n          foto: null,\n          rescatistas: [],\n          showErrorPage: false,\n          openError: false,\n          openSuccess: false,\n          msg: \"\"\n        });\n      }\n    };\n\n    this.fetchData = () => {\n      let url = this.props.location.search;\n      let params = queryString.parse(url);\n      this.setState({\n        id: params.id\n      });\n      fetch(api.url + \"/registroGeneral/?id=\" + params.id, {\n        method: \"get\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        }\n      }).then(response => response.json()).then(response => {\n        if (Object.keys(response).length === 1) {\n          this.setState({\n            showErrorPage: true\n          });\n          return;\n        }\n\n        for (const element in response) {\n          if (element.includes(\"fecha\")) {\n            const date = response[element];\n            if (!date || date === \"\" || date === \"0000-00-00\") continue;\n            this.setState({\n              [element]: new Date(date)\n            });\n          } else if (element.includes(\"foto\")) {\n            if (response[element]) {\n              var buffer = Buffer.from(response[element].data);\n              this.setState({\n                [element]: buffer.toString(\"utf8\")\n              });\n            }\n          } else {\n            this.setState({\n              [element]: response[element]\n            });\n          }\n        }\n      }).catch(err => console.log(err));\n    };\n  }\n\n  componentDidUpdate() {\n    let url = this.props.location.search;\n    let params = queryString.parse(url);\n    this.estaRegistrado = params.id ? true : false;\n\n    if (!this.estaRegistrado && !this.restablecido) {\n      this.restablecido = true;\n      this.handleRestablecer();\n    }\n  }\n\n  componentDidMount() {\n    let url = this.props.location.search;\n    let params = queryString.parse(url);\n    this.setState({\n      estaRegistrado: params.id ? true : false\n    });\n\n    if (params.id) {\n      this.fetchData();\n    }\n  }\n\n  handleAlert(e, msg) {\n    if (e === \"openSuccess\") {\n      this.setState({ ...this.state,\n        openError: false,\n        openSuccess: true\n      });\n    } else if (e === \"openError\") {\n      this.setState({ ...this.state,\n        openError: true,\n        openSuccess: false,\n        msg: msg\n      });\n    }\n  }\n\n  render() {\n    let url = this.props.location.search;\n    let params = queryString.parse(url);\n    if (this.state.showErrorPage) return /*#__PURE__*/React.createElement(ErrorPage, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 239,\n        columnNumber: 46\n      }\n    });\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"RegistroGeneral\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 241,\n        columnNumber: 13\n      }\n    }, this.estaRegistrado ? /*#__PURE__*/React.createElement(\"div\", {\n      className: \"NavBarRegistrosGeneral\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 243,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(NavBarRegistros, {\n      tabIndicatorPosition: \"0%\",\n      activePosition: \"RegistroGeneral\",\n      id: params.id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 244,\n        columnNumber: 25\n      }\n    })) : null, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"FormularioGeneral\",\n      style: {\n        height: this.estaRegistrado ? \"80vh\" : \"85.98245614vh\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 252,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"alertRG\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 255,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(Collapse, {\n      in: this.state.openError,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 256,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(Alert, {\n      onClose: () => {\n        this.setState({ ...this.state,\n          openError: false\n        });\n      },\n      variant: \"outlined\",\n      severity: \"error\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 257,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(AlertTitle, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 267,\n        columnNumber: 33\n      }\n    }, \"Error - Faltan llenar los siguientes campos\"), this.state.msg)), /*#__PURE__*/React.createElement(Collapse, {\n      in: this.state.openSuccess,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 274,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(Alert, {\n      onClose: () => {\n        this.setState({ ...this.state,\n          openSuccess: false\n        });\n      },\n      variant: \"outlined\",\n      severity: \"success\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 275,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(AlertTitle, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 285,\n        columnNumber: 33\n      }\n    }, \"Datos guardados\")))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"DatosGenerales\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 289,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(DatosGeneralesRG, {\n      handleChange: this.handleChange,\n      handleDate: this.handleDate,\n      nombre: this.state.nombre,\n      edad: this.state.edad,\n      genero: this.state.genero,\n      especie: this.state.especie,\n      fechaDeRescate: this.state.fechaDeRescate,\n      estatus: this.state.estatus,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 290,\n        columnNumber: 25\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"Rescatistas\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 301,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(Rescatistas, {\n      rescatistas: this.state.rescatistas,\n      agregarRescatista: this.agregarRescatista,\n      eliminarRescatista: this.eliminarRescatista,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 302,\n        columnNumber: 25\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"DireccionGeneral\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 308,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(Direccion, {\n      handleChange: this.handleChange,\n      calle: this.state.calle,\n      numero: this.state.numero,\n      colonia: this.state.colonia,\n      municipio: this.state.municipio,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 309,\n        columnNumber: 25\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"SenasParticulares\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 317,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-field\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 318,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-field__control\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 319,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"textarea\", {\n      id: \"senasParticulares\",\n      className: \"form-field__textarea\",\n      placeholder: \" \",\n      rows: \"4\",\n      name: \"senasParticulares\",\n      value: this.state.senasParticulares,\n      onChange: this.handleChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 320,\n        columnNumber: 33\n      }\n    }), /*#__PURE__*/React.createElement(\"label\", {\n      htmlFor: \"senasParticulares\",\n      className: \"form-field__label\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 329,\n        columnNumber: 33\n      }\n    }, \"Se\\xF1as Particulares\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-field__bar\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 335,\n        columnNumber: 33\n      }\n    }))))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"BotonesRegistroGeneral\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 341,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Link, {\n      to: \"/Laika/Adopcion\" + this.props.location.search,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 342,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      className: \"BotonGeneralTransicion BotonAnteriorGeneral\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 343,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      \"aria-hidden\": \"true\",\n      className: \"fa fa-chevron-circle-left fa-fw\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 344,\n        columnNumber: 29\n      }\n    }), \"Adopcion\")), /*#__PURE__*/React.createElement(\"button\", {\n      className: \"BotonGeneralRestablecer BotonCentralGeneral\",\n      onClick: this.handleRestablecer,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 352,\n        columnNumber: 21\n      }\n    }, \"Restablecer\", /*#__PURE__*/React.createElement(\"i\", {\n      \"aria-hidden\": \"true\",\n      className: \"fa fa-eraser fa-fw\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 357,\n        columnNumber: 25\n      }\n    })), /*#__PURE__*/React.createElement(\"button\", {\n      className: \"BotonGeneralGuardar BotonCentralGeneral\",\n      onClick: event => {\n        const alert = validationRG(this.state);\n\n        if (alert.isValid) {\n          this.handleSubmit(event);\n          this.handleAlert(\"openSuccess\");\n        } else {\n          this.handleAlert(\"openError\", alert.msg);\n        }\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 362,\n        columnNumber: 21\n      }\n    }, this.estaRegistrado ? \"Guardar\" : \"Registrar\", /*#__PURE__*/React.createElement(\"i\", {\n      \"aria-hidden\": \"true\",\n      className: \"fa fa-save fa-fw\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 375,\n        columnNumber: 25\n      }\n    })), this.estaRegistrado ? /*#__PURE__*/React.createElement(ModalEliminar, {\n      idAnimal: this.state.id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 377,\n        columnNumber: 44\n      }\n    }) : null, /*#__PURE__*/React.createElement(Link, {\n      to: \"/Laika/ExpedienteMedico\" + this.props.location.search,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 379,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      className: \"BotonGeneralTransicion BotonSiguienteGeneral\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 385,\n        columnNumber: 25\n      }\n    }, \"Expediente M\\xE9dico\", /*#__PURE__*/React.createElement(\"i\", {\n      className: \"fa fa-chevron-circle-right fa-fw\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 387,\n        columnNumber: 29\n      }\n    })))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"BarraLateralGeneral\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 392,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"idLabelGeneral\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 393,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 394,\n        columnNumber: 25\n      }\n    }, \"ID:\", this.state.id)), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"fotoGeneral\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 396,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(Foto, {\n      id: \"foto\",\n      foto: this.state.foto,\n      imageHandler: this.imageHandler,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 397,\n        columnNumber: 25\n      }\n    }))));\n  }\n\n}\n\nexport default withRouter(RegistroGeneral);","map":{"version":3,"sources":["/home/agus/Desktop/PROJECTS/LAIKA/frontend/src/Components/RegistroGeneral/RegistroGeneral.js"],"names":["React","Rescatistas","DatosGeneralesRG","ModalEliminar","Direccion","Foto","NavBarRegistros","Link","withRouter","queryString","validationRG","AlertTitle","Collapse","Alert","ErrorPage","RegistroGeneral","Component","state","id","nombre","edad","genero","especie","fechaDeRescate","estatus","calle","numero","colonia","municipio","senasParticulares","foto","rescatistas","openError","openSuccess","msg","showErrorPage","restablecido","estaRegistrado","handleChange","event","setState","target","name","value","handleDate","fecha","handleSubmit","preventDefault","updateDB","insertDB","fetch","api","url","method","headers","body","JSON","stringify","then","response","json","ID_Animal","console","log","props","location","search","history","push","catch","err","agregarRescatista","rescatista","text","eliminarRescatista","filter","imageHandler","reader","FileReader","onload","readyState","result","readAsDataURL","files","error","handleRestablecer","fetchData","params","parse","Object","keys","length","element","includes","date","Date","buffer","Buffer","from","data","toString","componentDidUpdate","componentDidMount","handleAlert","e","render","height","alert","isValid"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport Rescatistas from \"./Subcomponents/Rescatistas\";\nimport DatosGeneralesRG from \"./Subcomponents/DatosGeneralesRG\";\nimport ModalEliminar from \"./Subcomponents/ModalEliminar\";\nimport Direccion from \"../SharedComponents/Direccion\";\nimport Foto from \"../SharedComponents/Foto\";\nimport NavBarRegistros from \"../SharedComponents/NavBarRegistros\";\nimport { Link, withRouter } from \"react-router-dom\";\nimport \"./Styles/RegistroGeneral.css\";\nimport queryString from \"query-string\";\nimport { validationRG } from \"./Functions/ValidationRG\";\nimport AlertTitle from \"@material-ui/lab/AlertTitle\";\nimport Collapse from \"@material-ui/core/Collapse\";\nimport Alert from \"@material-ui/lab/Alert\";\nimport ErrorPage from \"../SharedComponents/ErrorPage\";\n\nclass RegistroGeneral extends React.Component {\n    state = {\n        id: \"\",\n        nombre: \"\",\n        edad: \"\",\n        genero: \"\",\n        especie: \"\",\n        fechaDeRescate: null,\n        estatus: \"\",\n        calle: \"\",\n        numero: \"\",\n        colonia: \"\",\n        municipio: \"\",\n        senasParticulares: \"\",\n        foto: null,\n        rescatistas: [],\n\n        openError: false,\n        openSuccess: false,\n        msg: \"\",\n        showErrorPage: false,\n    };\n\n    restablecido = false;\n    estaRegistrado = false;\n\n    handleChange = (event) => {\n        this.setState({\n            [event.target.name]: event.target.value,\n        });\n    };\n\n    handleDate = (fecha, name) => {\n        this.setState({\n            [name]: fecha,\n        });\n    };\n\n    handleSubmit = (event) => {\n        event.preventDefault();\n\n        this.estaRegistrado ? this.updateDB() : this.insertDB();\n    };\n\n    insertDB = () => {\n        fetch(api.url+\"/registroGeneral\", {\n            method: \"post\",\n            headers: { \"Content-Type\": \"application/json\" },\n            body: JSON.stringify(this.state),\n        })\n            .then((response) => response.json())\n            .then((ID_Animal) => {\n                console.log(ID_Animal);\n                this.props.location.search = \"/Laika/RegistroGeneral?id='+ID_Animal\";\n                this.props.history.push('/Laika/RegistroGeneral?id='+ID_Animal);\n            })\n            .catch((err) => console.log(err));\n    };\n\n    updateDB = () => {\n        fetch(api.url+\"/registroGeneral\", {\n            method: \"put\",\n            headers: { \"Content-Type\": \"application/json\" },\n            body: JSON.stringify(this.state),\n        })\n            .then((response) => response.json())\n            .catch((err) => console.log(err));\n    };\n\n    agregarRescatista = (rescatista) => {\n        if (rescatista.text !== \"\") {\n            this.setState((state) => ({\n                rescatistas: [rescatista, ...state.rescatistas],\n            }));\n        }\n    };\n\n    eliminarRescatista = (id) => {\n        this.setState((state) => ({\n            rescatistas: state.rescatistas.filter(\n                (rescatista) => rescatista.id !== id\n            ),\n        }));\n    };\n\n    imageHandler = (event) => {\n        try {\n            const reader = new FileReader();\n            const foto = event.target.id;\n\n            reader.onload = () => {\n                if (reader.readyState === 2) {\n                    this.setState({ [foto]: reader.result });\n                }\n            };\n            reader.readAsDataURL(event.target.files[0]);\n        } catch (error) {}\n    };\n\n    handleRestablecer = () => {\n        if (this.estaRegistrado) this.fetchData();\n        else {\n            this.setState({\n                id: \"\",\n                nombre: \"\",\n                edad: \"\",\n                genero: \"\",\n                especie: \"\",\n                fechaDeRescate: null,\n                estatus: \"\",\n                calle: \"\",\n                numero: \"\",\n                colonia: \"\",\n                municipio: \"\",\n                senasParticulares: \"\",\n                foto: null,\n                rescatistas: [],\n                showErrorPage: false,\n              \n              \topenError: false,\n                openSuccess: false,\n                msg: \"\",\n            });\n        }\n    };\n\n    fetchData = () => {\n        let url = this.props.location.search;\n        let params = queryString.parse(url);\n\n        \n        this.setState({\n            id: params.id\n        });\n\t\t\n\n        fetch(api.url+\"/registroGeneral/?id=\" + params.id, {\n            method: \"get\",\n            headers: { \"Content-Type\": \"application/json\" },\n        })\n            .then((response) => response.json())\n            .then((response) => {\n                if (Object.keys(response).length === 1) {\n                    this.setState({\n                        showErrorPage: true,\n                    });\n                    return;\n                }\n                for (const element in response) {\n                    if (element.includes(\"fecha\")) {\n                        const date = response[element];\n                        if (!date || date === \"\" || date === \"0000-00-00\")\n                            continue;\n                        this.setState({\n                            [element]: new Date(date),\n                        });\n                    } else if (element.includes(\"foto\")) {\n                        if (response[element]) {\n                            var buffer = Buffer.from(response[element].data);\n\n                            this.setState({\n                                [element]: buffer.toString(\"utf8\"),\n                            });\n                        }\n                    } else {\n                        this.setState({\n                            [element]: response[element],\n                        });\n                    }\n                }\n            })\n            .catch((err) => console.log(err));\n    };\n\n\n\n    componentDidUpdate() {\n        let url = this.props.location.search;\n        let params = queryString.parse(url);\n\n        this.estaRegistrado = params.id ? true : false;\n\n        if (!this.estaRegistrado && !this.restablecido) {\n            this.restablecido = true;\n            this.handleRestablecer();\n        }\n    }\n\n    componentDidMount() {\n        let url = this.props.location.search;\n        let params = queryString.parse(url);\n\n        this.setState({\n            estaRegistrado: params.id ? true : false,\n        });\n\n        if (params.id) {\n            this.fetchData();\n        }\n    }\n\n    handleAlert(e, msg) {\n        if (e === \"openSuccess\") {\n            this.setState({\n                ...this.state,\n                openError: false,\n                openSuccess: true,\n            });\n        } else if (e === \"openError\") {\n            this.setState({\n                ...this.state,\n                openError: true,\n                openSuccess: false,\n                msg: msg,\n            });\n        }\n    }\n\n    render() {\n        let url = this.props.location.search;\n        let params = queryString.parse(url);\n\n        if (this.state.showErrorPage) return <ErrorPage />;\n        return (\n            <div className=\"RegistroGeneral\">\n                {this.estaRegistrado ? (\n                    <div className=\"NavBarRegistrosGeneral\">\n                        <NavBarRegistros\n                            tabIndicatorPosition={\"0%\"}\n                            activePosition={\"RegistroGeneral\"}\n                            id={params.id}\n                        />\n                    </div>\n                ) : null}\n\n                <div\n                    className=\"FormularioGeneral\" style={{height: this.estaRegistrado ? \"80vh\" : \"85.98245614vh\"}}\n                >\n                    <div className=\"alertRG\">\n                        <Collapse in={this.state.openError}>\n                            <Alert\n                                onClose={() => {\n                                    this.setState({\n                                        ...this.state,\n                                        openError: false,\n                                    });\n                                }}\n                                variant=\"outlined\"\n                                severity=\"error\"\n                            >\n                                <AlertTitle>\n                                    Error - Faltan llenar los siguientes campos\n                                </AlertTitle>\n                                {this.state.msg}\n                            </Alert>\n                        </Collapse>\n\n                        <Collapse in={this.state.openSuccess}>\n                            <Alert\n                                onClose={() => {\n                                    this.setState({\n                                        ...this.state,\n                                        openSuccess: false,\n                                    });\n                                }}\n                                variant=\"outlined\"\n                                severity=\"success\"\n                            >\n                                <AlertTitle>Datos guardados</AlertTitle>\n                            </Alert>\n                        </Collapse>\n                    </div>\n                    <div className=\"DatosGenerales\">\n                        <DatosGeneralesRG\n                            handleChange={this.handleChange}\n                            handleDate={this.handleDate}\n                            nombre={this.state.nombre}\n                            edad={this.state.edad}\n                            genero={this.state.genero}\n                            especie={this.state.especie}\n                            fechaDeRescate={this.state.fechaDeRescate}\n                            estatus={this.state.estatus}\n                        />\n                    </div>\n                    <div className=\"Rescatistas\">\n                        <Rescatistas\n                            rescatistas={this.state.rescatistas}\n                            agregarRescatista={this.agregarRescatista}\n                            eliminarRescatista={this.eliminarRescatista}\n                        />\n                    </div>\n                    <div className=\"DireccionGeneral\">\n                        <Direccion\n                            handleChange={this.handleChange}\n                            calle={this.state.calle}\n                            numero={this.state.numero}\n                            colonia={this.state.colonia}\n                            municipio={this.state.municipio}\n                        />\n                    </div>\n                    <div className=\"SenasParticulares\">\n                        <div className=\"form-field\">\n                            <div className=\"form-field__control\">\n                                <textarea\n                                    id=\"senasParticulares\"\n                                    className=\"form-field__textarea\"\n                                    placeholder=\" \"\n                                    rows=\"4\"\n                                    name=\"senasParticulares\"\n                                    value={this.state.senasParticulares}\n                                    onChange={this.handleChange}\n                                ></textarea>\n                                <label\n                                    htmlFor=\"senasParticulares\"\n                                    className=\"form-field__label\"\n                                >\n                                    Señas Particulares\n                                </label>\n                                <div className=\"form-field__bar\"></div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n\n                <div className=\"BotonesRegistroGeneral\">\n                    <Link to={\"/Laika/Adopcion\" + this.props.location.search}>\n                        <button className=\"BotonGeneralTransicion BotonAnteriorGeneral\">\n                            <i\n                                aria-hidden=\"true\"\n                                className=\"fa fa-chevron-circle-left fa-fw\"\n                            ></i>\n                            Adopcion\n                        </button>\n                    </Link>\n\n                    <button\n                        className=\"BotonGeneralRestablecer BotonCentralGeneral\"\n                        onClick={this.handleRestablecer}\n                    >\n                        Restablecer\n                        <i\n                            aria-hidden=\"true\"\n                            className=\"fa fa-eraser fa-fw\"\n                        ></i>\n                    </button>\n                    <button\n                        className=\"BotonGeneralGuardar BotonCentralGeneral\"\n                        onClick={(event) => {\n                            const alert = validationRG(this.state);\n                            if (alert.isValid) {\n                                this.handleSubmit(event);\n                                this.handleAlert(\"openSuccess\");\n                            } else {\n                                this.handleAlert(\"openError\", alert.msg);\n                            }\n                        }}\n                    >\n                        {this.estaRegistrado ? \"Guardar\" : \"Registrar\"}\n                        <i aria-hidden=\"true\" className=\"fa fa-save fa-fw\"></i>\n                    </button>\n                    {this.estaRegistrado ? <ModalEliminar idAnimal={this.state.id}/> : null}\n\n                    <Link\n                        to={\n                            \"/Laika/ExpedienteMedico\" +\n                            this.props.location.search\n                        }\n                    >\n                        <button className=\"BotonGeneralTransicion BotonSiguienteGeneral\">\n                            Expediente Médico\n                            <i className=\"fa fa-chevron-circle-right fa-fw\"></i>\n                        </button>\n                    </Link>\n                </div>\n\n                <div className=\"BarraLateralGeneral\">\n                    <div className=\"idLabelGeneral\">\n                        <label>ID:{this.state.id}</label>\n                    </div>\n                    <div className=\"fotoGeneral\">\n                        <Foto\n                            id=\"foto\"\n                            foto={this.state.foto}\n                            imageHandler={this.imageHandler}\n                        />\n                    </div>\n                </div>\n            </div>\n        );\n    }\n\n}\nexport default withRouter(RegistroGeneral);\n"]},"metadata":{},"sourceType":"module"}