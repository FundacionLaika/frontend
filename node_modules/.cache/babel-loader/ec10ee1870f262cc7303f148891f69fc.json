{"ast":null,"code":"var _jsxFileName = \"/home/agus/Desktop/PROJECTS/LAIKA/frontend/src/Components/ExpedienteMedico/ExpedienteMedico.js\";\nimport React, { Component } from \"react\";\nimport Diagnostico from \"./Subcomponentes/Diagnostico\";\nimport Esterilizacion from \"./Subcomponentes/Esterilizacion\";\nimport CartillaVacunacion from \"./Subcomponentes/CartillaVacunacion\";\nimport { Link, withRouter } from \"react-router-dom\";\nimport NavBarRegistros from \"../SharedComponents/NavBarRegistros\";\nimport shortid from \"shortid\";\nimport DataGridMed from \"./Subcomponentes/DataGridMed\";\nimport Foto from \"../SharedComponents/Foto\";\nimport \"./Styles/ExpedienteMedico.css\";\nimport queryString from \"query-string\";\nimport { validationExpMed } from \"./Functions/validationExpMed\";\nimport AlertTitle from \"@material-ui/lab/AlertTitle\";\nimport Collapse from \"@material-ui/core/Collapse\";\nimport Alert from \"@material-ui/lab/Alert\";\nimport ErrorPage from \"../SharedComponents/ErrorPage\";\nimport api from \"../SharedComponents/APIConfig\";\n\nclass ExpedienteMedico extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      /*ID*/\n      id: \"\",\n\n      /*Diagnóstico*/\n      atropellamiento: false,\n      tvt: false,\n      sarnaPiel: false,\n      viral: false,\n      embarazo: false,\n      cachorros: false,\n      hemoparasitos: false,\n      otro: false,\n      otroEspecificar: \"\",\n\n      /*Esterilización*/\n      esterilizado: \"\",\n      citaEsterilizacion: \"\",\n      fechaEsterilizacion: null,\n\n      /*Cartilla de Vacunación*/\n      vacuna1: false,\n      vacuna2: false,\n      vacuna3: false,\n      vacuna4: false,\n      vacuna5: false,\n      fechaVacuna1: null,\n      fechaVacuna2: null,\n      fechaVacuna3: null,\n      fechaVacuna4: null,\n      fechaVacuna5: null,\n\n      /*Fotos*/\n      foto1: null,\n      foto2: null,\n      foto3: null,\n\n      /*Tratamiento*/\n      tratamiento: [],\n      especie: \"\",\n      openError: false,\n      openSuccess: false,\n      msg: \"\",\n      showErrorPage: false\n    };\n\n    this.imageHandler = event => {\n      try {\n        const reader = new FileReader();\n        const foto = event.target.id;\n\n        reader.onload = () => {\n          if (reader.readyState === 2) {\n            this.setState({\n              [foto]: reader.result\n            });\n          }\n        };\n\n        reader.readAsDataURL(event.target.files[0]);\n      } catch (error) {}\n    };\n\n    this.handleChange = event => {\n      const value = event.target.type === \"checkbox\" ? event.target.checked : event.target.value;\n\n      if (event.target.name === \"otro\") {\n        this.setState({ ...this.state,\n          otroEspecificar: \"\",\n          [event.target.name]: value\n        });\n      } else if (event.target.id === \"idCitaEsterilzacionNo\") {\n        this.setState({ ...this.state,\n          fechaEsterilizacion: null,\n          [event.target.name]: value\n        });\n      } else {\n        this.setState({ ...this.state,\n          [event.target.name]: value\n        });\n      }\n    };\n\n    this.handleDate = (fecha, name) => {\n      this.setState({\n        [name]: fecha\n      });\n    };\n\n    this.handleSubmit = event => {\n      event.preventDefault();\n      this.updateDB();\n    };\n\n    this.updateDB = () => {\n      fetch(api.url + \"/expedienteMedico\", {\n        method: \"put\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify(this.state)\n      }).then(response => response.json()).then(response => {}).catch(err => console.log(err));\n    };\n\n    this.handleRestablecer = () => {\n      this.fetchData();\n    };\n\n    this.fetchData = () => {\n      let url = this.props.location.search;\n      let params = queryString.parse(url);\n\n      if (!params.id) {\n        this.setState({\n          showErrorPage: true\n        });\n        return;\n      } else {\n        this.setState({\n          id: params.id\n        });\n      }\n\n      fetch(api.url + \"/expedienteMedico/?id=\" + params.id, {\n        method: \"get\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        }\n      }).then(response => response.json()).then(response => {\n        if (Object.keys(response).length === 1) {\n          this.setState({\n            showErrorPage: true\n          });\n          return;\n        }\n\n        for (const element in response) {\n          if (element.includes(\"fecha\")) {\n            const date = response[element];\n            if (!date || date === \"\" || date === \"0000-00-00\") continue;\n            this.setState({\n              [element]: new Date(date)\n            });\n          } else if (element.includes(\"foto\")) {\n            if (response[element]) {\n              var buffer = Buffer.from(response[element].data);\n              this.setState({\n                [element]: buffer.toString(\"utf8\")\n              });\n            }\n          } else {\n            this.setState({\n              [element]: response[element]\n            });\n          }\n        }\n      }).catch(err => console.log(err));\n    };\n\n    this.addRow = event => {\n      event.preventDefault();\n      const newRow = {\n        id: shortid.generate(),\n        fechaInicio: null,\n        fechaFinal: null,\n        comentarios: \"\",\n        accion: \"\",\n        citaMedica: null\n      };\n      this.setState(state => ({\n        tratamiento: [newRow, ...state.tratamiento]\n      }));\n    };\n\n    this.deleteRow = id => {\n      this.setState(state => ({\n        tratamiento: state.tratamiento.filter(row => row.id !== id)\n      }));\n    };\n\n    this.modifyRow = (id, name, value) => {\n      let dataTemp = this.state.tratamiento;\n      if (!dataTemp) return;\n      dataTemp.forEach(element => {\n        if (element.id === id) {\n          if (name === \"fechaInicio\") element.fechaInicio = value;else if (name === \"fechaFinal\") element.fechaFinal = value;else if (name === \"comentarios\") element.comentarios = value;else if (name === \"accion\") element.accion = value;else if (name === \"citaMedica\") element.citaMedica = value;\n        }\n      });\n      this.setState({\n        tratamiento: dataTemp\n      });\n    };\n  }\n\n  componentDidMount() {\n    this.fetchData();\n  }\n  /*Manejador de datagrid medico*/\n\n\n  handleAlert(e, msg) {\n    if (e === \"openSuccess\") {\n      this.setState({ ...this.state,\n        openError: false,\n        openSuccess: true\n      });\n    } else if (e === \"openError\") {\n      this.setState({ ...this.state,\n        openError: true,\n        openSuccess: false,\n        msg: msg\n      });\n    }\n  }\n  /*Expediente Médico*/\n\n\n  render() {\n    if (this.state.showErrorPage) return /*#__PURE__*/React.createElement(ErrorPage, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 265,\n        columnNumber: 41\n      }\n    });\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"RegistroMedico\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 268,\n        columnNumber: 4\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"NavBarRegistrosMedico\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 269,\n        columnNumber: 5\n      }\n    }, /*#__PURE__*/React.createElement(NavBarRegistros, {\n      tabIndicatorPosition: \"25%\",\n      activePosition: \"ExpedienteMedico\",\n      id: this.state.id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 270,\n        columnNumber: 6\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"alertExp\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 277,\n        columnNumber: 5\n      }\n    }, /*#__PURE__*/React.createElement(Collapse, {\n      in: this.state.openError,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 278,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(Alert, {\n      onClose: () => {\n        this.setState({ ...this.state,\n          openError: false\n        });\n      },\n      variant: \"outlined\",\n      severity: \"error\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 279,\n        columnNumber: 8\n      }\n    }, /*#__PURE__*/React.createElement(AlertTitle, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 289,\n        columnNumber: 9\n      }\n    }, \"Error - Faltan llenar los siguientes campos\"), this.state.msg)), /*#__PURE__*/React.createElement(Collapse, {\n      in: this.state.openSuccess,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 296,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(Alert, {\n      onClose: () => {\n        this.setState({ ...this.state,\n          openSuccess: false\n        });\n      },\n      variant: \"outlined\",\n      severity: \"success\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 297,\n        columnNumber: 8\n      }\n    }, /*#__PURE__*/React.createElement(AlertTitle, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 307,\n        columnNumber: 9\n      }\n    }, \"Datos guardados\")))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"FormularioMedico\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 312,\n        columnNumber: 5\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"diagnostico\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 316,\n        columnNumber: 6\n      }\n    }, /*#__PURE__*/React.createElement(Diagnostico, {\n      atropellamiento: this.state.atropellamiento,\n      tvt: this.state.tvt,\n      sarnaPiel: this.state.sarnaPiel,\n      viral: this.state.viral,\n      embarazo: this.state.embarazo,\n      cachorros: this.state.cachorros,\n      hemoparasitos: this.state.hemoparasitos,\n      otro: this.state.otro,\n      otroEspecificar: this.state.otroEspecificar,\n      handleChange: this.handleChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 317,\n        columnNumber: 7\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"esterilizacion\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 330,\n        columnNumber: 6\n      }\n    }, /*#__PURE__*/React.createElement(Esterilizacion, {\n      esterilizado: this.state.esterilizado,\n      citaEsterilizacion: this.state.citaEsterilizacion,\n      fechaEsterilizacion: this.state.fechaEsterilizacion,\n      handleChange: this.handleChange,\n      handleDate: this.handleDate,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 331,\n        columnNumber: 7\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"cartillaVacunacion\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 339,\n        columnNumber: 6\n      }\n    }, /*#__PURE__*/React.createElement(CartillaVacunacion, {\n      vacuna1: this.state.vacuna1,\n      vacuna2: this.state.vacuna2,\n      vacuna3: this.state.vacuna3,\n      vacuna4: this.state.vacuna4,\n      vacuna5: this.state.vacuna5,\n      fechaVacuna1: this.state.fechaVacuna1,\n      fechaVacuna2: this.state.fechaVacuna2,\n      fechaVacuna3: this.state.fechaVacuna3,\n      fechaVacuna4: this.state.fechaVacuna4,\n      fechaVacuna5: this.state.fechaVacuna5,\n      handleChange: this.handleChange,\n      handleDate: this.handleDate,\n      especie: this.state.especie,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 340,\n        columnNumber: 7\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"tratamiento\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 358,\n        columnNumber: 6\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"headerTratamiento\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 359,\n        columnNumber: 7\n      }\n    }, \" \", /*#__PURE__*/React.createElement(\"i\", {\n      \"aria-hidden\": \"true\",\n      className: \"fa fa-heartbeat fa-fw separation\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 361,\n        columnNumber: 8\n      }\n    }), \"Tratamiento\"), /*#__PURE__*/React.createElement(DataGridMed, {\n      data: this.state.tratamiento,\n      modifyRow: this.modifyRow,\n      addRow: this.addRow,\n      deleteRow: this.deleteRow,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 368,\n        columnNumber: 7\n      }\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"BarraLateralMedico\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 377,\n        columnNumber: 5\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"idLabelMedico\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 378,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 379,\n        columnNumber: 8\n      }\n    }, \"ID: \", this.state.id)), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"fotoMedico1\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 381,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(Foto, {\n      id: \"foto1\",\n      className: \"pt3\",\n      foto: this.state.foto1,\n      imageHandler: this.imageHandler,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 382,\n        columnNumber: 8\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"fotoMedico2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 389,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(Foto, {\n      id: \"foto2\",\n      className: \"pt3\",\n      foto: this.state.foto2,\n      imageHandler: this.imageHandler,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 390,\n        columnNumber: 8\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"fotoMedico3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 397,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(Foto, {\n      id: \"foto3\",\n      className: \"pt3\",\n      foto: this.state.foto3,\n      imageHandler: this.imageHandler,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 398,\n        columnNumber: 8\n      }\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"BotonesRegistroMedico\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 407,\n        columnNumber: 5\n      }\n    }, /*#__PURE__*/React.createElement(Link, {\n      to: \"/Laika/RegistroGeneral\" + this.props.location.search,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 408,\n        columnNumber: 6\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      className: \"BotonMedicoTransicion BotonAnteriorMedico\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 414,\n        columnNumber: 7\n      }\n    }, \" \", /*#__PURE__*/React.createElement(\"i\", {\n      \"aria-hidden\": \"true\",\n      className: \"fa fa-chevron-circle-left fa-fw\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 416,\n        columnNumber: 8\n      }\n    }), \"Registro General\")), /*#__PURE__*/React.createElement(\"button\", {\n      className: \"BotonMedicoRestablecer BotonCentralMedico\",\n      onClick: this.handleRestablecer,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 423,\n        columnNumber: 6\n      }\n    }, \"Restablecer\", \" \", /*#__PURE__*/React.createElement(\"i\", {\n      \"aria-hidden\": \"true\",\n      className: \"fa fa-eraser fa-fw\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 428,\n        columnNumber: 7\n      }\n    })), /*#__PURE__*/React.createElement(\"button\", {\n      className: \"BotonMedicoGuardar BotonCentralMedico\",\n      onClick: event => {\n        const alert = validationExpMed(this.state);\n\n        if (alert.isValid) {\n          this.handleSubmit(event);\n          this.handleAlert(\"openSuccess\");\n        } else {\n          this.handleAlert(\"openError\", alert.msg);\n        }\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 433,\n        columnNumber: 6\n      }\n    }, \"Guardar\", \" \", /*#__PURE__*/React.createElement(\"i\", {\n      \"aria-hidden\": \"true\",\n      className: \"fa fa-save fa-fw\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 446,\n        columnNumber: 7\n      }\n    })), /*#__PURE__*/React.createElement(Link, {\n      to: \"/Laika/HogarTemporal\" + this.props.location.search,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 448,\n        columnNumber: 6\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      className: \"BotonMedicoTransicion BotonSiguienteMedico\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 451,\n        columnNumber: 7\n      }\n    }, \"Hogar Temporal\", \" \", /*#__PURE__*/React.createElement(\"i\", {\n      \"aria-hidden\": \"true\",\n      className: \"fa fa-chevron-circle-right fa-fw\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 453,\n        columnNumber: 8\n      }\n    })))));\n  }\n\n}\n\nexport default withRouter(ExpedienteMedico);","map":{"version":3,"sources":["/home/agus/Desktop/PROJECTS/LAIKA/frontend/src/Components/ExpedienteMedico/ExpedienteMedico.js"],"names":["React","Component","Diagnostico","Esterilizacion","CartillaVacunacion","Link","withRouter","NavBarRegistros","shortid","DataGridMed","Foto","queryString","validationExpMed","AlertTitle","Collapse","Alert","ErrorPage","api","ExpedienteMedico","state","id","atropellamiento","tvt","sarnaPiel","viral","embarazo","cachorros","hemoparasitos","otro","otroEspecificar","esterilizado","citaEsterilizacion","fechaEsterilizacion","vacuna1","vacuna2","vacuna3","vacuna4","vacuna5","fechaVacuna1","fechaVacuna2","fechaVacuna3","fechaVacuna4","fechaVacuna5","foto1","foto2","foto3","tratamiento","especie","openError","openSuccess","msg","showErrorPage","imageHandler","event","reader","FileReader","foto","target","onload","readyState","setState","result","readAsDataURL","files","error","handleChange","value","type","checked","name","handleDate","fecha","handleSubmit","preventDefault","updateDB","fetch","url","method","headers","body","JSON","stringify","then","response","json","catch","err","console","log","handleRestablecer","fetchData","props","location","search","params","parse","Object","keys","length","element","includes","date","Date","buffer","Buffer","from","data","toString","addRow","newRow","generate","fechaInicio","fechaFinal","comentarios","accion","citaMedica","deleteRow","filter","row","modifyRow","dataTemp","forEach","componentDidMount","handleAlert","e","render","alert","isValid"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport Diagnostico from \"./Subcomponentes/Diagnostico\";\nimport Esterilizacion from \"./Subcomponentes/Esterilizacion\";\nimport CartillaVacunacion from \"./Subcomponentes/CartillaVacunacion\";\nimport { Link, withRouter } from \"react-router-dom\";\nimport NavBarRegistros from \"../SharedComponents/NavBarRegistros\";\nimport shortid from \"shortid\";\nimport DataGridMed from \"./Subcomponentes/DataGridMed\";\nimport Foto from \"../SharedComponents/Foto\";\nimport \"./Styles/ExpedienteMedico.css\";\nimport queryString from \"query-string\";\nimport { validationExpMed } from \"./Functions/validationExpMed\";\nimport AlertTitle from \"@material-ui/lab/AlertTitle\";\nimport Collapse from \"@material-ui/core/Collapse\";\nimport Alert from \"@material-ui/lab/Alert\";\nimport ErrorPage from \"../SharedComponents/ErrorPage\";\nimport api from \"../SharedComponents/APIConfig\";\n\n\n\nclass ExpedienteMedico extends Component {\n\tstate = {\n\t\t/*ID*/\n\t\tid: \"\",\n\n\t\t/*Diagnóstico*/\n\t\tatropellamiento: false,\n\t\ttvt: false,\n\t\tsarnaPiel: false,\n\t\tviral: false,\n\t\tembarazo: false,\n\t\tcachorros: false,\n\t\themoparasitos: false,\n\t\totro: false,\n\t\totroEspecificar: \"\",\n\n\t\t/*Esterilización*/\n\t\testerilizado: \"\",\n\t\tcitaEsterilizacion: \"\",\n\t\tfechaEsterilizacion: null,\n\n\t\t/*Cartilla de Vacunación*/\n\t\tvacuna1: false,\n\t\tvacuna2: false,\n\t\tvacuna3: false,\n\t\tvacuna4: false,\n\t\tvacuna5: false,\n\n\t\tfechaVacuna1: null,\n\t\tfechaVacuna2: null,\n\t\tfechaVacuna3: null,\n\t\tfechaVacuna4: null,\n\t\tfechaVacuna5: null,\n\n\t\t/*Fotos*/\n\t\tfoto1: null,\n\t\tfoto2: null,\n\t\tfoto3: null,\n\n\t\t/*Tratamiento*/\n\t\ttratamiento: [],\n\n\t\tespecie: \"\",\n\n\t\topenError: false,\n\t\topenSuccess: false,\n\t\tmsg: \"\",\n\t\tshowErrorPage: false\n\t};\n\n\t\n\n\t/*Manejador de imágenes*/\n\timageHandler = (event) => {\n\t\ttry {\n\t\t\tconst reader = new FileReader();\n\t\t\tconst foto = event.target.id;\n\n\t\t\treader.onload = () => {\n\t\t\t\tif (reader.readyState === 2) {\n\t\t\t\t\tthis.setState({ [foto]: reader.result });\n\t\t\t\t}\n\t\t\t};\n\t\t\treader.readAsDataURL(event.target.files[0]);\n\t\t} catch (error) {}\n\t};\n\n\t/*Manejador de eventos*/\n\thandleChange = (event) => {\n\t\tconst value =\n\t\t\tevent.target.type === \"checkbox\"\n\t\t\t\t? event.target.checked\n\t\t\t\t: event.target.value;\n\t\tif (event.target.name === \"otro\") {\n\t\t\tthis.setState({\n\t\t\t\t...this.state,\n\t\t\t\totroEspecificar: \"\",\n\t\t\t\t[event.target.name]: value,\n\t\t\t});\n\t\t} else if (event.target.id === \"idCitaEsterilzacionNo\") {\n\t\t\tthis.setState({\n\t\t\t\t...this.state,\n\t\t\t\tfechaEsterilizacion: null,\n\t\t\t\t[event.target.name]: value,\n\t\t\t});\n\t\t} else {\n\t\t\tthis.setState({\n\t\t\t\t...this.state,\n\t\t\t\t[event.target.name]: value,\n\t\t\t});\n\t\t}\n\t};\n\n\t/*Manejador de dates*/\n\thandleDate = (fecha, name) => {\n\t\tthis.setState({\n\t\t\t[name]: fecha,\n\t\t});\n\t};\n\n\t/*Manejador del botón submit*/\n\thandleSubmit = (event) => {\n\t\tevent.preventDefault();\n\t\tthis.updateDB();\n\t};\n\n\tupdateDB = () => {\n\t\tfetch(api.url+\"/expedienteMedico\", {\n\t\t\tmethod: \"put\",\n\t\t\theaders: { \"Content-Type\": \"application/json\" },\n\t\t\tbody: JSON.stringify(this.state),\n\t\t})\n\t\t\t.then((response) => response.json())\n\t\t\t.then((response) => {\n\t\t\t})\n\t\t\t.catch((err) => console.log(err));\n\t};\n\n\t/*Manejadores de Restablecer*/\n\thandleRestablecer = () => {\n\t\tthis.fetchData();\n\t};\n\n\tfetchData = () => {\n\t\tlet url = this.props.location.search;\n\t\tlet params = queryString.parse(url);\n\n\t\tif (!params.id) {\n\t\t\tthis.setState({\n\t\t\t\tshowErrorPage: true\n\t\t\t});\n\t\t\treturn;\n\t\t}\n\n\t\telse {\n\t\t\tthis.setState({\n\t\t\t\tid: params.id\n\t\t\t});\n\t\t}\n\n\t\tfetch(api.url+\"/expedienteMedico/?id=\" + params.id, {\n\t\t\tmethod: \"get\",\n\t\t\theaders: { \"Content-Type\": \"application/json\" },\n\t\t})\n\t\t\t.then((response) => response.json())\n\t\t\t.then((response) => {\n\t\t\t\tif (Object.keys(response).length === 1) {\n\t\t\t\t\tthis.setState({\n\t\t\t\t\t\tshowErrorPage: true\n\t\t\t\t\t});\n\t\t\t\t\treturn\n\t\t\t\t}\n\t\t\t\tfor (const element in response) {\n\t\t\t\t\tif (element.includes(\"fecha\")) {\n\t\t\t\t\t\tconst date = response[element];\n\t\t\t\t\t\tif (!date || date === \"\" || date === \"0000-00-00\")\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\tthis.setState({\n\t\t\t\t\t\t\t[element]: new Date(date),\n\t\t\t\t\t\t});\n\t\t\t\t\t} \n\t\t\t\t\telse if (element.includes(\"foto\")) {\n\t\t\t\t\t\tif (response[element]) {\n\n\t\t\t\t\t\t\tvar buffer = Buffer.from(response[element].data);\n\n\t\t\t\t\t\t\tthis.setState({\n\t\t\t\t\t\t\t\t[element]: buffer.toString(\"utf8\"),\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t} \n\t\t\t\t\telse {\n\t\t\t\t\t\tthis.setState({\n\t\t\t\t\t\t\t[element]: response[element],\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.catch((err) => console.log(err));\n\t};\n\n\tcomponentDidMount() {\n\t\tthis.fetchData();\n\t}\n\n\t/*Manejador de datagrid medico*/\n\taddRow = (event) => {\n\t\tevent.preventDefault();\n\t\tconst newRow = {\n\t\t\tid: shortid.generate(),\n\t\t\tfechaInicio: null,\n\t\t\tfechaFinal: null,\n\t\t\tcomentarios: \"\",\n\t\t\taccion: \"\",\n\t\t\tcitaMedica: null,\n\t\t};\n\t\tthis.setState((state) => ({\n\t\t\ttratamiento: [newRow, ...state.tratamiento],\n\t\t}));\n\t};\n\n\tdeleteRow = (id) => {\n\t\tthis.setState((state) => ({\n\t\t\ttratamiento: state.tratamiento.filter((row) => row.id !== id),\n\t\t}));\n\t};\n\n\tmodifyRow = (id, name, value) => {\n\t\tlet dataTemp = this.state.tratamiento;\n\t\tif (!dataTemp) return;\n\n\t\tdataTemp.forEach((element) => {\n\t\t\tif (element.id === id) {\n\t\t\t\tif (name === \"fechaInicio\") element.fechaInicio = value;\n\t\t\t\telse if (name === \"fechaFinal\") element.fechaFinal = value;\n\t\t\t\telse if (name === \"comentarios\") element.comentarios = value;\n\t\t\t\telse if (name === \"accion\") element.accion = value;\n\t\t\t\telse if (name === \"citaMedica\") element.citaMedica = value;\n\t\t\t}\n\t\t});\n\t\tthis.setState({\n\t\t\ttratamiento: dataTemp,\n\t\t});\n\t};\n\n\thandleAlert(e, msg) {\n\t\tif (e === \"openSuccess\") {\n\t\t\tthis.setState({\n\t\t\t\t...this.state,\n\t\t\t\topenError: false,\n\t\t\t\topenSuccess: true,\n\t\t\t});\n\t\t} else if (e === \"openError\") {\n\t\t\tthis.setState({\n\t\t\t\t...this.state,\n\t\t\t\topenError: true,\n\t\t\t\topenSuccess: false,\n\t\t\t\tmsg: msg,\n\t\t\t});\n\t\t}\n\t}\n\n\t/*Expediente Médico*/\n\trender() {\n\t\tif (this.state.showErrorPage) return (<ErrorPage />);\n\n\t\treturn (\n\t\t\t<div className=\"RegistroMedico\">\n\t\t\t\t<div className=\"NavBarRegistrosMedico\">\n\t\t\t\t\t<NavBarRegistros\n\t\t\t\t\t\ttabIndicatorPosition={\"25%\"}\n\t\t\t\t\t\tactivePosition={\"ExpedienteMedico\"}\n\t\t\t\t\t\tid={this.state.id}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\n\t\t\t\t<div className=\"alertExp\">\n\t\t\t\t\t\t<Collapse in={this.state.openError}>\n\t\t\t\t\t\t\t<Alert\n\t\t\t\t\t\t\t\tonClose={() => {\n\t\t\t\t\t\t\t\t\tthis.setState({\n\t\t\t\t\t\t\t\t\t\t...this.state,\n\t\t\t\t\t\t\t\t\t\topenError: false,\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\t\t\tseverity=\"error\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<AlertTitle>\n\t\t\t\t\t\t\t\t\tError - Faltan llenar los siguientes campos\n\t\t\t\t\t\t\t\t</AlertTitle>\n\t\t\t\t\t\t\t\t{this.state.msg}\n\t\t\t\t\t\t\t</Alert>\n\t\t\t\t\t\t</Collapse>\n\n\t\t\t\t\t\t<Collapse in={this.state.openSuccess}>\n\t\t\t\t\t\t\t<Alert\n\t\t\t\t\t\t\t\tonClose={() => {\n\t\t\t\t\t\t\t\t\tthis.setState({\n\t\t\t\t\t\t\t\t\t\t...this.state,\n\t\t\t\t\t\t\t\t\t\topenSuccess: false,\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\t\t\tseverity=\"success\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<AlertTitle>Datos guardados</AlertTitle>\n\t\t\t\t\t\t\t</Alert>\n\t\t\t\t\t\t</Collapse>\n\t\t\t\t\t</div>\n\n\t\t\t\t<div\n\t\t\t\t\tclassName=\"FormularioMedico\"\n\t\t\t\t>\n\t\t\t\t\t\n\t\t\t\t\t<div className=\"diagnostico\">\n\t\t\t\t\t\t<Diagnostico\n\t\t\t\t\t\t\tatropellamiento={this.state.atropellamiento}\n\t\t\t\t\t\t\ttvt={this.state.tvt}\n\t\t\t\t\t\t\tsarnaPiel={this.state.sarnaPiel}\n\t\t\t\t\t\t\tviral={this.state.viral}\n\t\t\t\t\t\t\tembarazo={this.state.embarazo}\n\t\t\t\t\t\t\tcachorros={this.state.cachorros}\n\t\t\t\t\t\t\themoparasitos={this.state.hemoparasitos}\n\t\t\t\t\t\t\totro={this.state.otro}\n\t\t\t\t\t\t\totroEspecificar={this.state.otroEspecificar}\n\t\t\t\t\t\t\thandleChange={this.handleChange}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"esterilizacion\">\n\t\t\t\t\t\t<Esterilizacion\n\t\t\t\t\t\t\testerilizado={this.state.esterilizado}\n\t\t\t\t\t\t\tcitaEsterilizacion={this.state.citaEsterilizacion}\n\t\t\t\t\t\t\tfechaEsterilizacion={this.state.fechaEsterilizacion}\n\t\t\t\t\t\t\thandleChange={this.handleChange}\n\t\t\t\t\t\t\thandleDate={this.handleDate}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"cartillaVacunacion\">\n\t\t\t\t\t\t<CartillaVacunacion\n\t\t\t\t\t\t\tvacuna1={this.state.vacuna1}\n\t\t\t\t\t\t\tvacuna2={this.state.vacuna2}\n\t\t\t\t\t\t\tvacuna3={this.state.vacuna3}\n\t\t\t\t\t\t\tvacuna4={this.state.vacuna4}\n\t\t\t\t\t\t\tvacuna5={this.state.vacuna5}\n\n\t\t\t\t\t\t\tfechaVacuna1={this.state.fechaVacuna1}\n\t\t\t\t\t\t\tfechaVacuna2={this.state.fechaVacuna2}\n\t\t\t\t\t\t\tfechaVacuna3={this.state.fechaVacuna3}\n\t\t\t\t\t\t\tfechaVacuna4={this.state.fechaVacuna4}\n\t\t\t\t\t\t\tfechaVacuna5={this.state.fechaVacuna5}\n\n\t\t\t\t\t\t\thandleChange={this.handleChange}\n\t\t\t\t\t\t\thandleDate={this.handleDate}\n\t\t\t\t\t\t\tespecie={this.state.especie}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"tratamiento\">\n\t\t\t\t\t\t<div className=\"headerTratamiento\">\n\t\t\t\t\t\t\t{\" \"}\n\t\t\t\t\t\t\t<i\n\t\t\t\t\t\t\t\taria-hidden=\"true\"\n\t\t\t\t\t\t\t\tclassName=\"fa fa-heartbeat fa-fw separation\"\n\t\t\t\t\t\t\t></i>\n\t\t\t\t\t\t\tTratamiento\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<DataGridMed\n\t\t\t\t\t\t\tdata={this.state.tratamiento}\n\t\t\t\t\t\t\tmodifyRow={this.modifyRow}\n\t\t\t\t\t\t\taddRow={this.addRow}\n\t\t\t\t\t\t\tdeleteRow={this.deleteRow}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t<div className=\"BarraLateralMedico\">\n\t\t\t\t\t\t<div className=\"idLabelMedico\">\n\t\t\t\t\t\t\t<label>ID: {this.state.id}</label>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"fotoMedico1\">\n\t\t\t\t\t\t\t<Foto\n\t\t\t\t\t\t\t\tid=\"foto1\"\n\t\t\t\t\t\t\t\tclassName=\"pt3\"\n\t\t\t\t\t\t\t\tfoto={this.state.foto1}\n\t\t\t\t\t\t\t\timageHandler={this.imageHandler}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"fotoMedico2\">\n\t\t\t\t\t\t\t<Foto\n\t\t\t\t\t\t\t\tid=\"foto2\"\n\t\t\t\t\t\t\t\tclassName=\"pt3\"\n\t\t\t\t\t\t\t\tfoto={this.state.foto2}\n\t\t\t\t\t\t\t\timageHandler={this.imageHandler}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"fotoMedico3\">\n\t\t\t\t\t\t\t<Foto\n\t\t\t\t\t\t\t\tid=\"foto3\"\n\t\t\t\t\t\t\t\tclassName=\"pt3\"\n\t\t\t\t\t\t\t\tfoto={this.state.foto3}\n\t\t\t\t\t\t\t\timageHandler={this.imageHandler}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t<div className=\"BotonesRegistroMedico\">\n\t\t\t\t\t<Link\n\t\t\t\t\t\tto={\n\t\t\t\t\t\t\t\"/Laika/RegistroGeneral\" +\n\t\t\t\t\t\t\tthis.props.location.search\n\t\t\t\t\t\t}\n\t\t\t\t\t>\n\t\t\t\t\t\t<button className=\"BotonMedicoTransicion BotonAnteriorMedico\">\n\t\t\t\t\t\t\t{\" \"}\n\t\t\t\t\t\t\t<i\n\t\t\t\t\t\t\t\taria-hidden=\"true\"\n\t\t\t\t\t\t\t\tclassName=\"fa fa-chevron-circle-left fa-fw\"\n\t\t\t\t\t\t\t></i>\n\t\t\t\t\t\t\tRegistro General\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</Link>\n\t\t\t\t\t<button\n\t\t\t\t\t\tclassName=\"BotonMedicoRestablecer BotonCentralMedico\"\n\t\t\t\t\t\tonClick={this.handleRestablecer}\n\t\t\t\t\t>\n\t\t\t\t\t\tRestablecer{\" \"}\n\t\t\t\t\t\t<i\n\t\t\t\t\t\t\taria-hidden=\"true\"\n\t\t\t\t\t\t\tclassName=\"fa fa-eraser fa-fw\"\n\t\t\t\t\t\t></i>\n\t\t\t\t\t</button>\n\t\t\t\t\t<button\n\t\t\t\t\t\tclassName=\"BotonMedicoGuardar BotonCentralMedico\"\n\t\t\t\t\t\tonClick={(event) => {\n\t\t\t\t\t\t\tconst alert = validationExpMed(this.state);\n\t\t\t\t\t\t\tif (alert.isValid) {\n\t\t\t\t\t\t\t\tthis.handleSubmit(event);\n\t\t\t\t\t\t\t\tthis.handleAlert(\"openSuccess\");\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tthis.handleAlert(\"openError\", alert.msg);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\tGuardar{\" \"}\n\t\t\t\t\t\t<i aria-hidden=\"true\" className=\"fa fa-save fa-fw\"></i>\n\t\t\t\t\t</button>\n\t\t\t\t\t<Link\n\t\t\t\t\t\tto={\"/Laika/HogarTemporal\" + this.props.location.search}\n\t\t\t\t\t>\n\t\t\t\t\t\t<button className=\"BotonMedicoTransicion BotonSiguienteMedico\">\n\t\t\t\t\t\t\tHogar Temporal{\" \"}\n\t\t\t\t\t\t\t<i\n\t\t\t\t\t\t\t\taria-hidden=\"true\"\n\t\t\t\t\t\t\t\tclassName=\"fa fa-chevron-circle-right fa-fw\"\n\t\t\t\t\t\t\t></i>\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</Link>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default withRouter(ExpedienteMedico);\n"]},"metadata":{},"sourceType":"module"}